!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("axios")):"function"==typeof define&&define.amd?define(["axios"],n):(e=e||self).easylog=n(e.axios)}(this,(function(e){"use strict";function n(e,n,i,t,r,o,s){try{var c=e[o](s),a=c.value}catch(e){return void i(e)}c.done?n(a):Promise.resolve(a).then(t,r)}function i(e){return function(){var i=this,t=arguments;return new Promise((function(r,o){var s=e.apply(i,t);function c(e){n(s,r,o,c,a,"next",e)}function a(e){n(s,r,o,c,a,"throw",e)}c(void 0)}))}}function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var r=function(){for(var e=0,n=0,i=arguments.length;n<i;n++)e+=arguments[n].length;var t=Array(e),r=0;for(n=0;n<i;n++)for(var o=arguments[n],s=0,c=o.length;s<c;s++,r++)t[r]=o[s];return t},o=function(e,n,i){this.name=e,this.version=n,this.os=i,this.type="browser"},s=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},c=function(e,n,i,t){this.name=e,this.version=n,this.os=i,this.bot=t,this.type="bot-device"},a=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,f=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],d=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return e?p(e):"undefined"!=typeof navigator?p(navigator.userAgent):"undefined"!=typeof process&&process.version?new s(process.version.slice(1)):null}function p(e){var n=function(e){return""!==e&&f.reduce((function(n,i){var t=i[0],r=i[1];if(n)return n;var o=r.exec(e);return!!o&&[t,o]}),!1)}(e);if(!n)return null;var i=n[0],t=n[1];if("searchbot"===i)return new a;var s=t[1]&&t[1].split(/[._]/).slice(0,3);s?s.length<3&&(s=r(s,function(e){for(var n=[],i=0;i<e;i++)n.push("0");return n}(3-s.length))):s=[];var h=s.join("."),p=function(e){for(var n=0,i=d.length;n<i;n++){var t=d[n],r=t[0];if(t[1].exec(e))return r}return null}(e),l=u.exec(e);return l&&l[1]?new c(i,h,p,l[1]):new o(i,s.join("."),p)}var l=function(e){for(var n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i="",t=e;t>0;--t)i+=n[Math.floor(Math.random()*n.length)];return i},v=function(){var e=h();return{browser:e.name,browser_version:e.version,OS:e.os,currentUrl:window.location.href||document.URL,screen_width:window.innerWidth,screen_height:window.innerHeight}};var w=function(e,n){return e(n={exports:{}},n.exports),n.exports}((function(e,n){var i;i=function(){function e(){for(var e=0,n={};e<arguments.length;e++){var i=arguments[e];for(var t in i)n[t]=i[t]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function i(t){function r(){}function o(n,i,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(i);/^[\{\[]/.test(s)&&(i=s)}catch(e){}i=t.write?t.write(i,n):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var a in o)o[a]&&(c+="; "+a,!0!==o[a]&&(c+="="+o[a].split(";")[0]));return document.cookie=n+"="+i+c}}function s(e,i){if("undefined"!=typeof document){for(var r={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var c=o[s].split("="),a=c.slice(1).join("=");i||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var u=n(c[0]);if(a=(t.read||t)(a,u)||n(a),i)try{a=JSON.parse(a)}catch(e){}if(r[u]=a,e===u)break}catch(e){}}return e?r[e]:r}}return r.set=o,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(n,i){o(n,"",e(i,{expires:-1}))},r.defaults={},r.withConverter=i,r}((function(){}))},e.exports=i()})),g=function(){function n(e){console.log("ahb"),this.config=e||{},this.queue=[],this.processing=0,this.api="http://alexis-baranger.com/easylog"}var r=n.prototype;return r.init=function(e){this.config.access_token=e},r.post=function(e){this.processing?this.queue.push(e):this.processQueue(e)},r.processQueue=function(){var n=i(regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.processing++,n.prev=1,n.next=4,e.post(this.api+"/send",i);case 4:n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error(n.t0);case 10:this.processing--,this.queue.length>0&&this.processQueue(this.queue.shift());case 12:case"end":return n.stop()}}),n,this,[[1,7]])})));return function(e){return n.apply(this,arguments)}}(),r.send=function(){var e=i(regeneratorRuntime.mark((function e(n,i,t){var r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.config.distinct_id,o=this.config.access_token,s=new Date,this.post({distinct_id:r,level:n,event_name:i,access_token:o,properties:t,datetime:s,device:v()});case 4:case"end":return e.stop()}}),e,this)})));return function(n,i,t){return e.apply(this,arguments)}}(),r.identify=function(){var n=i(regeneratorRuntime.mark((function n(i){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=this.config.distinct_id,i.id&&(this.config.distinct_id=i.id,w.set("_el",i.id)),o=this.config.access_token,n.next=6,e.post(this.api+"/identify",t({distinct_id:r,access_token:o,device:v()},i));case 6:n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0);case 12:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(e){return n.apply(this,arguments)}}(),r.info=function(e,n){return this.send("info",e,n)},r.warn=function(e,n){return this.send("warn",e,n)},r.debug=function(e,n){return this.send("debug",e,n)},r.error=function(e,n){return this.send("error",e,n)},n}();return new(function(){function e(e){var n=w.get()._el;n||(n=l(30),w.set("_el",n)),this.config=e||{},this.config.distinct_id=n,this.instance=new g(this.config)}var n=e.prototype;return n.create=function(e){return new g({access_token:e,distinct_id:this.config.distinct_id})},n.init=function(e){this.instance.init(e)},n.identify=function(e){this.instance.identify(e)},n.info=function(e,n){this.instance.info(e,n)},n.warn=function(e,n){this.instance.warn(e,n)},n.debug=function(e,n){this.instance.debug(e,n)},n.error=function(e,n){this.instance.error(e,n)},e}())({is_default:!0})}));
